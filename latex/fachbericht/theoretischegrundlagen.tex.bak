\section{Theoretische Grundlagen}
Anhand der gegebenen Schrittantwort einer Strecke, soll der dazu passende Regler dimensioniert werden können. Für die Berechnungen werden die aus der Schrittantwort der Strecke ausgelesenen Kenngrössen Verzugszeit (T$_u$), Anstiegszeit (T$_g$) und Streckenbeiwert (K$_s$) verwendet. Zur Dimensionierung eines passenden Reglers existieren verschiedenste Methoden. Im Folgenden werden nun zwei Möglichkeiten genauer erläutert, wobei das Hauptaugenmerk auf der ersten Methode, der Phasengangmethode, liegt und die zweite, die Dimensionierung mittels diverser Faustformeln, lediglich zum Vergleich durchgeführt wird. \newline

- [Bild einer Schrittantwort]
% Bild einer Schrittantwort mit eingezeichneten tu, tg, ks

[Nach Bild Schrittantwort]: Die Kurve stellt die Schrittantwort der Regelstrecke dar. Daran gelegt ist die Wendetangente, welche benötigt wird um die Verzugs- und die Anstiegszeit messen zu können.\newline

Ziel:\newline
Ziel ist es, Pi- sowie PID-Regler zu dimensionieren, das heisst deren Kennwerte zu berechnen. Der PI-Regler hat die Kennwerte Nachstellzeit ($T_n$) und Reglerverstärkung ($K_R$), beim PID-Regler kommt noch die Vorhaltezeit ($T_v$) hinzu.

\subsection{Streckenanalyse}
- Streckenidentifikation mit Sani-Methode \newline
- Übertragungsfunktion der Strecke \newline

Die Streckenidentifikation wird mittels der Sani-Methode durchgeführt. Aus dem Verhältnis von T$_u$ und T$_g$ werden die Ordnung der Strecke und die dazugehörigen Zeitkonstanten berechnet, welche benötigt werden um die Übertragungsfunktion der Regelstrecke darzustellen. \newline 


% Quelle Skript "Mathematisches Labor mlab", Soenicki/Bürgi
Die Übertragungsfunktion der Strecke ist wiefolgt definiert:

\begin{align}
Gs(s)=\frac{K_s}{(1+sT_1)(1+sT_2)...(1+sT_n)}
\end{align}

\subsection{Phasengangmethode}
- Einleitung für Phasengangmethode / entwickelt von, grafische Methode / rechnerisch umgesetzt \newline

Bei der Phasengangmethode handelt es sich eigentlich um eine grafische Dimensionierungsmethode, welche früher noch von Hand mit logarithmischem Papier durchgeführt wurde. Anstelle der grafischen Dimensionierung wird die Methode in diesem Fall komplett rechnerisch gelöst. Um die Methode zu verstehen wird ein theoretisches Grundwissen benötigt, welches im Folgenden erklärt wird.


\subsubsection{Grundwissen}
- Amplituden / Phasengang aus Übertragungsfunktion berechnen \newline
- Amplitudengänge Regler / Knickkreisfrequenzen / Phasenrand Überschwingen /  \newline

Durch Ersetzen von $s$ durch $j\omega$ in der Übertragungsfunktion der Strecke erhält man den Frequenzgang. Um die Phasengangmethode anwenden zu können wird der Amplituden- und Phasengang der Regelstrecke benötigt.
% Vielleicht noch ein Satz zur Definition a-gang ph-gang, wie man auf die Formeln kommt


\begin{align}
A(\omega)=abs(G(j\omega))
\end{align}
\begin{align}
\varphi(\omega)=arg(G(\omega))
\end{align}
\begin{align}
\varphi(\omega)=-arctan(\omega T_1)-arctan(\omega T_2)...-arctan(\omega T_n)
\end{align}\newline

Die Zeitkonstanten des zu dimensionierenden Reglers stehen in direktem Zusammenhang mit dessen Amplitudengang. In den untenstehenden Grafiken sind die Amplitudengänge eines PI- und eines PID-Reglers dargestellt, wobei die x-Achsen logarithmisch skaliert sind Wie die Kreisfrequenzen an den Knickstellen mit den Reglerparametern zusammenhängen sollen, ist in den untenstehenden Formeln ersichtlich.\newline

- [Tabelle mit Amplitudengängen PI- und PID-Regler / Formeln für wpi, wnk, wvk, Tnk, Tvk (Pflichtenheft S. 7)]\newline

Diese Knickkreisfrequenzen werden mithilfe des Phasengangs der Strecke berechnet. Je nach dem welcher Reglertyp dimensioniert werden soll, müssen andere Punkte im Phasengang gesucht werden.\newline

- [Tabelle mit -90-Punkt und -135-Punkt und Knickkreisfrequenzen]\newline

Der PI-Regler kann anhand dieser Dimensionierungskriterien bereits dimensioniert werden. Beim PID-Regler muss allerdings noch ein Parameter mehr bestimmt werden. Es handelt sich um den Faktor $\beta$ welcher benötigt wird um die Knickkreisfrequenzen des PID-Reglers berechnen zu können. Dieser Faktor $\beta$ hängt mit der Tangentensteigung des Phasengangs der offenen Regelung im Punkt $-135^\circ$ zusammen.\newline
Ein Dimensionierungskriterium der Phasengangmethode lautet, dass die Steigung des Phasengangs der gesamten, offenen Regelung bei der Knickkreisfrequenz $\frac{-0.5}{\omega_{PID}}$ betragen soll. Dies hat damit zu tun, dass eine Steigung von -20dB/Dekade angestrebt wird. Auf die genaue Herleitung wird an dieser Stelle allerdings verzichtet. \newline
%Herleitung Beta im Anhang

Es gilt also die folgende Beziehung:\newline

\begin{align}
\frac{2\beta}{1+\beta^2} + \omega_{PID}\frac{d\varphi_{Strecke(\omega_{PID})}}{d\omega} = -0.5
\end{align}\newline

Da der Phasengang der Strecke und somit dessen Ableitung gegeben ist, kann durch Auflösen nach $\beta$ nun auch dieser Parameter ermittelt werden. Ergibt sich ein Wert grösser als eins oder imaginär, so wird $\beta$ als eins angenommen.

Die Verstärkung des Reglers wird mit Hilfe des Phasenrands bestimmt. Der Phasenrand ist die Differenz der Streckenphase zu $-180^\circ$. Bei unterschiedlichem Phasenrand ergeben sich unterschiedliche Verstärkungsfaktoren, was auch auf das Überschwingen des Reglers Einfluss hat. Die untenstehende Tabelle zeigt den Zusammenhang zwischen dem gewählten Phasenrands und dem daraus resultierenden Überschwingen der Regelung.\newline

- [Tabelle Phasenrand (Pflichtenheft S. 8)]

Zur Berechnung der Verstärkung werden nun die Amplitudengänge der Strecke, sowie des Reglers benötigt. Die Werte dieser beiden Amplitudengänge an der Stelle wo der Phasenrand abgetragen wurde, werden miteinander multipliziert. Gemäss Phasengangmethode soll die Verstärkung an dieser Stelle eins sein. Dies führt zur Formel:\newline
\begin{align}
K_R=\frac{1}{\vert{Go(\omega_D)}\vert{}}
\end{align}




\subsubsection{Ablauf der Phasengangmethode}
- Ablauf Phasengangmethode \newline
- Umrechnung Bode-/Reglerkonform \newline

Die Phasengangmethode der Strecke $\varphi_S$ wird nach dem folgenden Ablauf durchgeführt (Die Punkte 2. und 3. werden nur für PID-Regler benötigt.):
\begin{enumerate}
\item Im Phasengang der Strecke $\varphi_S$ werden die Kreisfrequenzen in bestimmten Punkten gesucht. \newline
- [Tabelle mit PI: -90-Punkt , PID: -135-Punkt , Umrechnung Knickkreisfrequenzen->Zeiten (Pflichtenheft S. 9)]
\item Der Faktor $\beta$ wird bestimmt.
\item Mithilfe von $\beta$ werden die Zeiten $T_{nk}$ und $T_{vk}$ ermittelt.
\item Der Phasengang der offenen Regelung $\varphi_go$ wird berechnet (Phasengang Strecke + Phasengang Regler)
\item Die Kreisfrequenz $\omega_D$ beim gewählten Phasenrand wird berechnet.
\item Die Amplitudengänge der Strecke sowie des Reglers bei $\omega_D$ werden miteinander multipliziert. Damit wird die Reglerverstärkung $K_R$ festgelegt. 
\end{enumerate}

Besondere Vorsicht ist bei den erhaltenen Kenngrössen des dimensionierten Reglers geboten. Die Parameter des PI-Reglers können direkt weiterverwendet werden. Die Reglerparameter des PID-Reglers, welche wir bei der Dimensionierung mittels Phasengangmethode erhalten, sind nicht dieselben, wie diejenigen welche durch die Faustformeln ermittelt werden. Dies hat die Ursache darin, dass je nach dem mit welchem Ziel gerechnet wird, die Rechnung mit unterschiedlichen Parametern von Vorteil ist. Es wird zwischen Regler- und Bodekonform unterschieden. Standardmässig wird in der Fachliteratur meist reglerkonform gerechnet. Die Parameter des PID-Reglers, welche aus der Phasengangmethode hervorgehen, sind jedoch bodekonform. Bodekonform bedeutet, dass die Parameter kaskadiert sind und die logarithmische Rechnung somit vereinfacht wird. Für die Umrechnung wurden die folgenden Formeln für PID-Regler hergeleitet: \newline
% Verweis auf Herleitung im Anhang
\begin{align}
K_R=K_{rk}\left(1+\frac{T_{vk}}{T_{nk}}-\frac{T_p}{T_{nk}}\right)
\end{align}
\begin{align}
T_n=T_{nk}+T_{vk}-T_p
\end{align}
\begin{align}
T_v=\frac{T_{nk}T_{vk}}{T_{nk}+T_{vk}-T_p}-T_p
\end{align}\newline

$T_p$ steht für die parasitäre Zeitkonstante. Diese wird benötigt, da ein idealer PID-Regler in der Praxis nicht umsetzbar ist. Der Index k in der bodekonformen Darstellung steht für Kaskadierung.


\subsection{Dimensionierung mit Faustformeln}
- Diverse Fausformeln zum Vergleich \newline
- Formeln auflisten \newline

\subsection{Übertragungsfunktion der Regler}
- Berechnung Übertragungsfunktion der geschlossenen Regelung \newline

\subsection{Schrittantwort der Regelung}
- Übertragungsfunktion Regelung (Berechnung aus üfunk regler und üfunk regelung)\newline
- Berechnung durch Residuen